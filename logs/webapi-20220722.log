[2022-07-22 13:26:35.327 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 13:26:35.617 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 13:26:35.617 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 13:26:35.620 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 13:26:35.620 +07:00  INF]  Hosting environment: Development
[2022-07-22 13:26:35.620 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 13:26:36.274 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger - -
[2022-07-22 13:26:36.394 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger - - - 301 0 - 122.6000ms
[2022-07-22 13:26:36.396 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 13:26:36.637 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 13:26:36.637 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/swagger-ui-standalone-preset.js - -
[2022-07-22 13:26:36.637 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/swagger-ui-bundle.js - -
[2022-07-22 13:26:36.637 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/swagger-ui.css - -
[2022-07-22 13:26:36.638 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 241.2719ms
[2022-07-22 13:26:36.644 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 6.6772ms
[2022-07-22 13:26:36.683 +07:00  INF]  Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2022-07-22 13:26:36.683 +07:00  INF]  Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2022-07-22 13:26:36.683 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 45.8100ms
[2022-07-22 13:26:36.690 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/swagger-ui.css - - - 200 143632 text/css 52.7052ms
[2022-07-22 13:26:36.696 +07:00  INF]  Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2022-07-22 13:26:36.697 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 59.3705ms
[2022-07-22 13:26:36.838 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 13:26:36.968 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 130.5140ms
[2022-07-22 13:26:49.279 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - -
[2022-07-22 13:26:49.370 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:26:49.402 +07:00  INF]  Route matched with {action = "SendPhoneOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-07-22 13:26:50.750 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 13:26:51.699 +07:00  INF]  Executed DbCommand (82ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 13:30:07.383 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 13:30:07.661 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 13:30:07.661 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 13:30:07.664 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 13:30:07.665 +07:00  INF]  Hosting environment: Development
[2022-07-22 13:30:07.665 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 13:30:08.646 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 13:30:08.914 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 13:30:08.921 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 278.9075ms
[2022-07-22 13:30:08.921 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 5.7106ms
[2022-07-22 13:30:09.162 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 13:30:09.310 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.3373ms
[2022-07-22 13:30:14.009 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - -
[2022-07-22 13:30:14.101 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:30:14.130 +07:00  INF]  Route matched with {action = "SendPhoneOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-07-22 13:30:15.478 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 13:30:40.606 +07:00  INF]  Executed DbCommand (76ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM accounts AS a
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
[2022-07-22 13:30:48.196 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM accounts AS a
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
[2022-07-22 13:34:19.818 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 13:34:20.106 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 13:34:20.106 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 13:34:20.109 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 13:34:20.109 +07:00  INF]  Hosting environment: Development
[2022-07-22 13:34:20.109 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 13:34:21.030 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 13:34:21.314 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 13:34:21.319 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 294.4219ms
[2022-07-22 13:34:21.320 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 5.8755ms
[2022-07-22 13:34:21.422 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 13:34:21.575 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 153.0378ms
[2022-07-22 13:34:37.977 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - -
[2022-07-22 13:34:38.066 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:34:38.092 +07:00  INF]  Route matched with {action = "SendPhoneOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-07-22 13:34:39.455 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 13:34:54.389 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 13:34:54.655 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 13:34:54.655 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 13:34:54.661 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 13:34:54.662 +07:00  INF]  Hosting environment: Development
[2022-07-22 13:34:54.662 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 13:34:55.430 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 13:34:55.701 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 13:34:55.707 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 280.7066ms
[2022-07-22 13:34:55.708 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 6.1342ms
[2022-07-22 13:34:55.833 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 13:34:55.989 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.6146ms
[2022-07-22 13:34:59.932 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - -
[2022-07-22 13:35:00.017 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:35:00.047 +07:00  INF]  Route matched with {action = "SendPhoneOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-07-22 13:35:01.450 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 13:35:02.370 +07:00  INF]  Executed DbCommand (89ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 13:35:08.424 +07:00  INF]  Executing OkObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-07-22 13:35:08.437 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneOtp (API) in 8384.1961ms
[2022-07-22 13:35:08.438 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:35:08.452 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - - - 200 - application/json;+charset=utf-8 8519.1197ms
[2022-07-22 13:35:12.958 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - -
[2022-07-22 13:35:12.961 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:35:12.961 +07:00  INF]  Route matched with {action = "SendPhoneOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-07-22 13:35:29.698 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 13:35:29.927 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 13:35:29.927 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 13:35:29.931 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 13:35:29.931 +07:00  INF]  Hosting environment: Development
[2022-07-22 13:35:29.931 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 13:35:30.798 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 13:35:31.087 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 13:35:31.094 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 302.5758ms
[2022-07-22 13:35:31.094 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 6.6147ms
[2022-07-22 13:35:31.208 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 13:35:31.338 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.8853ms
[2022-07-22 13:35:40.840 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp?PhoneNumber=%2B84837226239 - -
[2022-07-22 13:35:40.918 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtp (API)'
[2022-07-22 13:35:40.943 +07:00  INF]  Route matched with {action = "SendPhoneOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-07-22 13:35:42.231 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 13:35:43.129 +07:00  INF]  Executed DbCommand (93ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 21:09:14.594 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:09:14.903 +07:00  INF]  Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "MaaSDB" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'MaaSDB';
[2022-07-22 21:09:14.945 +07:00  INF]  Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "MaaSDB";
[2022-07-22 21:09:52.835 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:10:08.159 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:10:08.670 +07:00  INF]  Executed DbCommand (204ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "MaaSDB";
[2022-07-22 21:10:08.811 +07:00  INF]  Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[2022-07-22 21:10:08.841 +07:00  INF]  Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
[2022-07-22 21:10:08.845 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2022-07-22 21:10:08.857 +07:00  INF]  Applying migration '20220722140953_InitialDB'.
[2022-07-22 21:10:08.905 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE roles (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    description character varying(100) NOT NULL,
    name character varying(20) NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_roles" PRIMARY KEY (id)
);
[2022-07-22 21:10:08.909 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE users (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    code uuid NOT NULL,
    name character varying(50) NOT NULL,
    gender integer NOT NULL,
    status integer NOT NULL,
    date_of_birth timestamp with time zone NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_users" PRIMARY KEY (id)
);
[2022-07-22 21:10:08.919 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE accounts (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    user_id integer NOT NULL,
    registration character varying(30) NULL,
    registration_type integer NOT NULL,
    verified boolean NOT NULL DEFAULT FALSE,
    role_id integer NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_accounts" PRIMARY KEY (id),
    CONSTRAINT "FK_accounts_roles_role_id" FOREIGN KEY (role_id) REFERENCES roles (id),
    CONSTRAINT "FK_accounts_users_user_id" FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
[2022-07-22 21:10:08.924 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE verified_codes (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    account_id integer NOT NULL,
    expired_time timestamp with time zone NOT NULL,
    code character varying(10) NOT NULL,
    registration_type integer NOT NULL,
    status boolean NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_verified_codes" PRIMARY KEY (id),
    CONSTRAINT "FK_verified_codes_accounts_account_id" FOREIGN KEY (account_id) REFERENCES accounts (id) ON DELETE CASCADE
);
[2022-07-22 21:10:08.928 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (1, TIMESTAMPTZ '2022-07-22 14:09:52.875836Z', 0, NULL, 'Role for driver', 'DRIVER', TIMESTAMPTZ '2022-07-22 14:09:52.875836Z', 0);
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (2, TIMESTAMPTZ '2022-07-22 14:09:52.87584Z', 0, NULL, 'Role for booker', 'BOOKER', TIMESTAMPTZ '2022-07-22 14:09:52.87584Z', 0);
[2022-07-22 21:10:08.929 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (1, '3993863d-42ab-4087-b186-b19fe3b38e39', TIMESTAMPTZ '2022-07-22 14:09:52.875841Z', 0, TIMESTAMPTZ '2022-07-22 14:09:52.875844Z', NULL, 1, 'Quach Dai Loi', 1, TIMESTAMPTZ '2022-07-22 14:09:52.875841Z', 0);
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (2, '25caa872-1206-46d3-b31d-b078a83d7b43', TIMESTAMPTZ '2022-07-22 14:09:52.875846Z', 0, TIMESTAMPTZ '2022-07-22 14:09:52.875846Z', NULL, 1, 'Olivier', 1, TIMESTAMPTZ '2022-07-22 14:09:52.875846Z', 0);
[2022-07-22 21:10:08.932 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (1, TIMESTAMPTZ '2022-07-22 14:09:52.875847Z', 0, NULL, 'loiqdse140970@fpt.edu.vn', 0, 1, TIMESTAMPTZ '2022-07-22 14:09:52.875847Z', 0, 2, TRUE);
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (2, TIMESTAMPTZ '2022-07-22 14:09:52.875849Z', 0, NULL, '+84837226239', 1, 2, TIMESTAMPTZ '2022-07-22 14:09:52.875849Z', 0, 1, TRUE);
[2022-07-22 21:10:08.935 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_accounts_registration_role_id" ON accounts (registration, role_id);
[2022-07-22 21:10:08.938 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_role_id" ON accounts (role_id);
[2022-07-22 21:10:08.940 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_user_id" ON accounts (user_id);
[2022-07-22 21:10:08.943 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_roles_description" ON roles (description);
[2022-07-22 21:10:08.945 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_verified_codes_account_id" ON verified_codes (account_id);
[2022-07-22 21:10:08.949 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('roles', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM roles) + 1,
        nextval(pg_get_serial_sequence('roles', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('users', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM users) + 1,
        nextval(pg_get_serial_sequence('users', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('accounts', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM accounts) + 1,
        nextval(pg_get_serial_sequence('accounts', 'id'))),
    false);
[2022-07-22 21:10:08.949 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220722140953_InitialDB', '6.0.6');
[2022-07-22 21:13:08.837 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 21:13:09.145 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 21:13:09.145 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 21:13:09.149 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 21:13:09.149 +07:00  INF]  Hosting environment: Development
[2022-07-22 21:13:09.150 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 21:13:09.870 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 21:13:10.184 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 21:13:10.189 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 327.7006ms
[2022-07-22 21:13:10.192 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 8.6925ms
[2022-07-22 21:13:10.491 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 21:13:10.615 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.3424ms
[2022-07-22 21:28:50.237 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-22 21:28:50.255 +07:00  INF]  CORS policy execution successful.
[2022-07-22 21:28:50.348 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 21:28:50.377 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-22 21:28:52.199 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:28:53.108 +07:00  INF]  Executed DbCommand (86ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 21:28:53.397 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-22 21:28:53.419 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 3036.5261ms
[2022-07-22 21:28:53.421 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 21:28:53.440 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 3202.7404ms
[2022-07-22 21:33:07.393 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:33:07.663 +07:00  INF]  Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "MaaSDB" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'MaaSDB';
[2022-07-22 21:33:07.686 +07:00  INF]  Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "MaaSDB";
[2022-07-22 21:33:23.503 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:33:37.676 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:33:38.023 +07:00  INF]  Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "MaaSDB";
[2022-07-22 21:33:38.152 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[2022-07-22 21:33:38.182 +07:00  INF]  Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
[2022-07-22 21:33:38.185 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2022-07-22 21:33:38.198 +07:00  INF]  Applying migration '20220722143323_InitialDB'.
[2022-07-22 21:33:38.246 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE roles (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    description character varying(100) NOT NULL,
    name character varying(20) NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_roles" PRIMARY KEY (id)
);
[2022-07-22 21:33:38.251 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE users (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    code uuid NOT NULL,
    name character varying(50) NOT NULL,
    gender integer NOT NULL,
    status integer NOT NULL,
    date_of_birth timestamp with time zone NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_users" PRIMARY KEY (id)
);
[2022-07-22 21:33:38.259 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE accounts (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    user_id integer NOT NULL,
    registration character varying(30) NULL,
    registration_type integer NOT NULL,
    verified boolean NOT NULL DEFAULT FALSE,
    role_id integer NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_accounts" PRIMARY KEY (id),
    CONSTRAINT "FK_accounts_roles_role_id" FOREIGN KEY (role_id) REFERENCES roles (id),
    CONSTRAINT "FK_accounts_users_user_id" FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
[2022-07-22 21:33:38.265 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE verified_codes (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    account_id integer NOT NULL,
    expired_time timestamp with time zone NOT NULL,
    code character varying(10) NOT NULL,
    registration_type integer NOT NULL,
    status boolean NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_verified_codes" PRIMARY KEY (id),
    CONSTRAINT "FK_verified_codes_accounts_account_id" FOREIGN KEY (account_id) REFERENCES accounts (id) ON DELETE CASCADE
);
[2022-07-22 21:33:38.268 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (1, TIMESTAMPTZ '2022-07-22 14:33:23.547108Z', 0, NULL, 'Role for booker', 'BOOKER', TIMESTAMPTZ '2022-07-22 14:33:23.547108Z', 0);
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (2, TIMESTAMPTZ '2022-07-22 14:33:23.547106Z', 0, NULL, 'Role for driver', 'DRIVER', TIMESTAMPTZ '2022-07-22 14:33:23.547106Z', 0);
[2022-07-22 21:33:38.269 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (1, '7352cb52-dda4-491c-bc54-3b3f29fe4a84', TIMESTAMPTZ '2022-07-22 14:33:23.547109Z', 0, TIMESTAMPTZ '2022-07-22 14:33:23.547111Z', NULL, 1, 'Quach Dai Loi', 1, TIMESTAMPTZ '2022-07-22 14:33:23.547109Z', 0);
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (2, '25ad695f-b6d5-4772-8206-bf5eb7b27c17', TIMESTAMPTZ '2022-07-22 14:33:23.547112Z', 0, TIMESTAMPTZ '2022-07-22 14:33:23.547112Z', NULL, 1, 'Olivier', 1, TIMESTAMPTZ '2022-07-22 14:33:23.547112Z', 0);
[2022-07-22 21:33:38.272 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (1, TIMESTAMPTZ '2022-07-22 14:33:23.547113Z', 0, NULL, 'loiqdse140970@fpt.edu.vn', 0, 1, TIMESTAMPTZ '2022-07-22 14:33:23.547113Z', 0, 2, TRUE);
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (2, TIMESTAMPTZ '2022-07-22 14:33:23.547114Z', 0, NULL, '+84837226239', 1, 2, TIMESTAMPTZ '2022-07-22 14:33:23.547114Z', 0, 1, TRUE);
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (3, TIMESTAMPTZ '2022-07-22 14:33:23.547115Z', 0, NULL, '+84837226239', 1, 1, TIMESTAMPTZ '2022-07-22 14:33:23.547115Z', 0, 2, TRUE);
[2022-07-22 21:33:38.275 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_accounts_registration_role_id" ON accounts (registration, role_id);
[2022-07-22 21:33:38.278 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_role_id" ON accounts (role_id);
[2022-07-22 21:33:38.282 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_user_id" ON accounts (user_id);
[2022-07-22 21:33:38.284 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_roles_description" ON roles (description);
[2022-07-22 21:33:38.287 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_verified_codes_account_id" ON verified_codes (account_id);
[2022-07-22 21:33:38.290 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('roles', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM roles) + 1,
        nextval(pg_get_serial_sequence('roles', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('users', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM users) + 1,
        nextval(pg_get_serial_sequence('users', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('accounts', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM accounts) + 1,
        nextval(pg_get_serial_sequence('accounts', 'id'))),
    false);
[2022-07-22 21:33:38.291 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220722143323_InitialDB', '6.0.6');
[2022-07-22 21:49:39.233 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 21:49:39.426 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 21:49:39.426 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 21:49:39.428 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 21:49:39.428 +07:00  INF]  Hosting environment: Development
[2022-07-22 21:49:39.428 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 21:49:40.414 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 21:49:40.764 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 21:49:40.770 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 360.5463ms
[2022-07-22 21:49:40.771 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 6.9942ms
[2022-07-22 21:49:40.917 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 21:49:41.054 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 136.7983ms
[2022-07-22 21:49:47.105 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-22 21:49:47.119 +07:00  INF]  CORS policy execution successful.
[2022-07-22 21:49:47.195 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 21:49:47.219 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-22 21:49:48.910 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:49:49.813 +07:00  INF]  Executed DbCommand (94ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 21:52:47.400 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 21:52:47.719 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 21:52:47.719 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 21:52:47.722 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 21:52:47.722 +07:00  INF]  Hosting environment: Development
[2022-07-22 21:52:47.722 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 21:52:48.471 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 21:52:48.783 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 21:52:48.790 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 5.6894ms
[2022-07-22 21:52:48.790 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 323.8906ms
[2022-07-22 21:52:48.911 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 21:52:49.033 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 122.7137ms
[2022-07-22 21:52:53.945 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-22 21:52:53.954 +07:00  INF]  CORS policy execution successful.
[2022-07-22 21:52:54.058 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 21:52:54.102 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-22 21:52:55.960 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 21:53:11.602 +07:00  INF]  Executed DbCommand (77ms) [Parameters=[@__roleName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.id, r.created_at, r.created_by, r.deleted_at, r.description, r.name, r.updated_at, r.updated_by
FROM roles AS r
WHERE r.name = @__roleName_0
[2022-07-22 21:53:30.020 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM accounts AS a
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
[2022-07-22 21:53:44.654 +07:00  INF]  Executed DbCommand (11ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 23:01:57.566 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-22 23:01:57.842 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-22 23:01:57.842 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-22 23:01:57.844 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-22 23:01:57.844 +07:00  INF]  Hosting environment: Development
[2022-07-22 23:01:57.844 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-22 23:01:58.363 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-22 23:01:58.701 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-22 23:01:58.708 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 348.7085ms
[2022-07-22 23:01:58.708 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 6.7717ms
[2022-07-22 23:01:58.913 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-22 23:01:59.041 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.1683ms
[2022-07-22 23:03:05.589 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-22 23:03:05.601 +07:00  INF]  CORS policy execution successful.
[2022-07-22 23:03:05.690 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 23:03:05.718 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-22 23:03:06.022 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 298.6933ms
[2022-07-22 23:03:06.025 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 23:03:06.026 +07:00  ERR]  An unhandled exception has occurred while executing the request.
FirebaseAdmin.Auth.FirebaseAuthException: Firebase ID token expired at 1658503712. Expected to be greater than 1658505785.
   at FirebaseAdmin.Auth.Jwt.FirebaseTokenVerifier.VerifyTokenAsync(String token, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken, Boolean checkRevoked, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken)
   at API.Controllers.Admin.DriversController.LoginByEmail(LoginByEmailRequest request) in D:\DotNet_Study\projects\MaaS\API\Controllers\Admin\DriversController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-07-22 23:03:06.081 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 500 - text/plain;+charset=utf-8 492.0055ms
[2022-07-22 23:04:43.895 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-22 23:04:43.929 +07:00  INF]  CORS policy execution successful.
[2022-07-22 23:04:43.929 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 23:04:43.929 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-22 23:04:45.601 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 23:04:50.834 +07:00  INF]  Executed DbCommand (92ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-07-22 23:04:57.089 +07:00  INF]  Executing BadRequestObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-07-22 23:04:57.094 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 13164.6205ms
[2022-07-22 23:04:57.095 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-22 23:04:57.108 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 400 - application/json;+charset=utf-8 13213.1281ms
[2022-07-22 23:11:42.857 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-22 23:11:43.128 +07:00  INF]  Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "MaaSDB" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'MaaSDB';
[2022-07-22 23:11:43.174 +07:00  INF]  Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "MaaSDB";
