[2022-07-12 02:40:03.138 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 02:40:03.520 +07:00  INF]  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "MaaSDB" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'MaaSDB';
[2022-07-12 02:40:03.588 +07:00  INF]  Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "MaaSDB";
[2022-07-12 02:40:14.319 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 02:40:23.773 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 02:40:24.209 +07:00  INF]  Executed DbCommand (212ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "MaaSDB";
[2022-07-12 02:40:24.361 +07:00  INF]  Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[2022-07-12 02:40:24.393 +07:00  INF]  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
[2022-07-12 02:40:24.397 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2022-07-12 02:40:24.409 +07:00  INF]  Applying migration '20220711194014_InitialDB'.
[2022-07-12 02:40:24.458 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE roles (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    description character varying(100) NOT NULL,
    name character varying(20) NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_roles" PRIMARY KEY (id)
);
[2022-07-12 02:40:24.464 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE users (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    code uuid NOT NULL,
    name character varying(50) NOT NULL,
    gender integer NOT NULL,
    status integer NOT NULL,
    date_of_birth timestamp with time zone NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_users" PRIMARY KEY (id)
);
[2022-07-12 02:40:24.473 +07:00  INF]  Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE accounts (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    user_id integer NOT NULL,
    registration character varying(30) NOT NULL,
    registration_type integer NOT NULL,
    verified boolean NOT NULL DEFAULT FALSE,
    role_id integer NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_accounts" PRIMARY KEY (id),
    CONSTRAINT "FK_accounts_roles_role_id" FOREIGN KEY (role_id) REFERENCES roles (id) ON DELETE CASCADE,
    CONSTRAINT "FK_accounts_users_user_id" FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
[2022-07-12 02:40:24.479 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE verified_codes (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    account_id integer NOT NULL,
    expired_time timestamp with time zone NOT NULL,
    code character varying(10) NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_verified_codes" PRIMARY KEY (id),
    CONSTRAINT "FK_verified_codes_accounts_account_id" FOREIGN KEY (account_id) REFERENCES accounts (id) ON DELETE CASCADE
);
[2022-07-12 02:40:24.483 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (1, TIMESTAMPTZ '2022-07-11 19:40:14.358344Z', 0, NULL, 'Role for driver', 'DRIVER', TIMESTAMPTZ '2022-07-11 19:40:14.358344Z', 0);
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (2, TIMESTAMPTZ '2022-07-11 19:40:14.358345Z', 0, NULL, 'Role for booker', 'BOOKER', TIMESTAMPTZ '2022-07-11 19:40:14.358345Z', 0);
[2022-07-12 02:40:24.485 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (1, '00000000-0000-0000-0000-000000000000', TIMESTAMPTZ '2022-07-11 19:40:14.358346Z', 0, TIMESTAMPTZ '2022-07-11 19:40:14.358346Z', NULL, 1, 'Quach Dai Loi', 1, TIMESTAMPTZ '2022-07-11 19:40:14.358346Z', 0);
[2022-07-12 02:40:24.487 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (1, TIMESTAMPTZ '2022-07-11 19:40:14.358347Z', 0, NULL, 'loiqdse140970@fpt.edu.vn', 0, 1, TIMESTAMPTZ '2022-07-11 19:40:14.358348Z', 0, 1, TRUE);
[2022-07-12 02:40:24.490 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_accounts_registration_role_id" ON accounts (registration, role_id);
[2022-07-12 02:40:24.493 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_role_id" ON accounts (role_id);
[2022-07-12 02:40:24.496 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_user_id" ON accounts (user_id);
[2022-07-12 02:40:24.505 +07:00  INF]  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_roles_description" ON roles (description);
[2022-07-12 02:40:24.508 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_verified_codes_account_id" ON verified_codes (account_id);
[2022-07-12 02:40:24.514 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('roles', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM roles) + 1,
        nextval(pg_get_serial_sequence('roles', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('users', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM users) + 1,
        nextval(pg_get_serial_sequence('users', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('accounts', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM accounts) + 1,
        nextval(pg_get_serial_sequence('accounts', 'id'))),
    false);
[2022-07-12 02:40:24.516 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220711194014_InitialDB', '6.0.6');
[2022-07-12 02:41:21.949 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 02:41:22.174 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 02:41:22.174 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 02:41:22.178 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 02:41:22.178 +07:00  INF]  Hosting environment: Development
[2022-07-12 02:41:22.179 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 02:41:22.954 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger - -
[2022-07-12 02:41:23.040 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger - - - 301 0 - 90.5257ms
[2022-07-12 02:41:23.046 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 02:41:23.284 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/swagger-ui.css - -
[2022-07-12 02:41:23.284 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/swagger-ui-standalone-preset.js - -
[2022-07-12 02:41:23.284 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/swagger-ui-bundle.js - -
[2022-07-12 02:41:23.286 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 02:41:23.290 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 4.3396ms
[2022-07-12 02:41:23.291 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 245.1273ms
[2022-07-12 02:41:23.338 +07:00  INF]  Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2022-07-12 02:41:23.338 +07:00  INF]  Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2022-07-12 02:41:23.338 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/swagger-ui.css - - - 200 143632 text/css 54.4548ms
[2022-07-12 02:41:23.338 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 53.9682ms
[2022-07-12 02:41:23.373 +07:00  INF]  Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2022-07-12 02:41:23.374 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 89.5567ms
[2022-07-12 02:41:23.548 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 02:41:23.588 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/favicon-32x32.png - -
[2022-07-12 02:41:23.589 +07:00  INF]  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2022-07-12 02:41:23.589 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/favicon-32x32.png - - - 200 628 image/png 0.6262ms
[2022-07-12 02:41:23.659 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.6700ms
[2022-07-12 02:42:45.584 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 02:42:45.590 +07:00  INF]  CORS policy execution successful.
[2022-07-12 02:42:45.682 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 02:42:45.713 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 02:55:14.588 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 02:55:14.786 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 02:55:14.786 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 02:55:14.788 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 02:55:14.788 +07:00  INF]  Hosting environment: Development
[2022-07-12 02:55:14.788 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 02:55:15.339 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 02:55:15.613 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 02:55:15.623 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 8.7966ms
[2022-07-12 02:55:15.624 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 292.0002ms
[2022-07-12 02:55:15.829 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 02:55:16.002 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 172.9469ms
[2022-07-12 02:55:26.065 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 02:55:26.071 +07:00  INF]  CORS policy execution successful.
[2022-07-12 02:55:26.133 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 02:55:26.155 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 02:55:26.281 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 120.6221ms
[2022-07-12 02:55:26.284 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 02:55:26.286 +07:00  ERR]  An unhandled exception has occurred while executing the request.
FirebaseAdmin.Auth.FirebaseAuthException: Firebase ID token has incorrect audience (aud) claim. Expected se-capstone-project-management but got maas-project-61216. Make sure the ID token comes from the same Firebase project as the credential used to initialize this SDK. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve a value ID token.
   at FirebaseAdmin.Auth.Jwt.FirebaseTokenVerifier.VerifyTokenAsync(String token, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken, Boolean checkRevoked, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken)
   at API.Controllers.Admin.DriversController.LoginByEmail(LoginByEmailRequest request) in D:\DotNet_Study\projects\MaaS\API\Controllers\Admin\DriversController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-07-12 02:55:26.349 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 500 - text/plain;+charset=utf-8 283.0502ms
[2022-07-12 02:58:08.080 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 02:58:08.242 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 02:58:08.243 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 02:58:08.245 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 02:58:08.245 +07:00  INF]  Hosting environment: Development
[2022-07-12 02:58:08.245 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 02:58:09.267 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 02:58:10.214 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 02:58:10.219 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 955.8688ms
[2022-07-12 02:58:10.220 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 5.4824ms
[2022-07-12 02:58:10.536 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 02:58:10.853 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 316.4133ms
[2022-07-12 02:58:15.425 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 02:58:15.430 +07:00  INF]  CORS policy execution successful.
[2022-07-12 02:58:15.488 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 02:58:15.509 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 02:58:17.533 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 02:58:18.514 +07:00  INF]  Executed DbCommand (81ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:19:08.122 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:19:08.563 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:19:08.563 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:19:08.566 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:19:08.566 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:19:08.566 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:19:09.312 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:19:09.654 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 346.3731ms
[2022-07-12 15:19:09.664 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:19:09.672 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.3225ms
[2022-07-12 15:19:10.002 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:19:10.193 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 191.5509ms
[2022-07-12 15:19:40.910 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:19:40.920 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:19:41.033 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:19:41.079 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:19:42.933 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:19:43.962 +07:00  INF]  Executed DbCommand (81ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:21:51.517 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:21:51.727 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:21:51.728 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:21:51.731 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:21:51.731 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:21:51.731 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:21:52.273 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:21:52.612 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:21:52.618 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 348.1735ms
[2022-07-12 15:21:52.619 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.4227ms
[2022-07-12 15:21:52.732 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:21:52.853 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 121.8917ms
[2022-07-12 15:21:58.200 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:21:58.206 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:21:58.275 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:21:58.297 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:21:59.719 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:22:00.650 +07:00  INF]  Executed DbCommand (82ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:43:07.266 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:43:07.539 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:43:07.539 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:43:07.543 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:43:07.543 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:43:07.543 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:43:08.402 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:43:08.666 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:43:08.674 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.0702ms
[2022-07-12 15:43:08.674 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 278.4488ms
[2022-07-12 15:43:08.788 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:43:08.900 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.2929ms
[2022-07-12 15:43:27.177 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:43:27.185 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:43:27.246 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:43:27.268 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:43:28.809 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:43:29.768 +07:00  INF]  Executed DbCommand (83ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:43:29.889 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2615.2397ms
[2022-07-12 15:43:29.891 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:43:29.893 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at API.JwtFeatures.JwtHandler.GetClaims(UserViewModel user) in D:\DotNet_Study\projects\MaaS\API\JwtFeatures\JwtHandler.cs:line 28
   at API.JwtFeatures.JwtHandler.GenerateToken(UserViewModel user) in D:\DotNet_Study\projects\MaaS\API\JwtFeatures\JwtHandler.cs:line 57
   at API.Controllers.Admin.DriversController.LoginByEmail(LoginByEmailRequest request) in D:\DotNet_Study\projects\MaaS\API\Controllers\Admin\DriversController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-07-12 15:43:29.965 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 500 - text/plain;+charset=utf-8 2787.4634ms
[2022-07-12 15:44:32.104 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:44:32.274 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:44:32.274 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:44:32.276 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:44:32.276 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:44:32.276 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:44:33.115 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:44:33.382 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:44:33.389 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 279.8872ms
[2022-07-12 15:44:33.389 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.1890ms
[2022-07-12 15:44:33.536 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:44:33.650 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.3337ms
[2022-07-12 15:44:40.122 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:44:40.127 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:44:40.199 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:44:40.226 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:44:41.722 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:44:42.656 +07:00  INF]  Executed DbCommand (80ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:44:42.775 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2543.9644ms
[2022-07-12 15:44:42.777 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:44:42.779 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at API.JwtFeatures.JwtHandler.GetClaims(UserViewModel user) in D:\DotNet_Study\projects\MaaS\API\JwtFeatures\JwtHandler.cs:line 28
   at API.JwtFeatures.JwtHandler.GenerateToken(UserViewModel user) in D:\DotNet_Study\projects\MaaS\API\JwtFeatures\JwtHandler.cs:line 57
   at API.Controllers.Admin.DriversController.LoginByEmail(LoginByEmailRequest request) in D:\DotNet_Study\projects\MaaS\API\Controllers\Admin\DriversController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-07-12 15:44:42.826 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 500 - text/plain;+charset=utf-8 2704.0168ms
[2022-07-12 15:45:34.119 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:45:34.281 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:45:34.281 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:45:34.283 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:45:34.283 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:45:34.283 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:45:34.853 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:45:35.181 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:45:35.200 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 352.7308ms
[2022-07-12 15:45:35.200 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 18.0914ms
[2022-07-12 15:45:35.353 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:45:35.541 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.9509ms
[2022-07-12 15:45:42.141 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:45:42.146 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:45:42.218 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:45:42.240 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:45:43.843 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:45:44.906 +07:00  INF]  Executed DbCommand (89ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:46:24.012 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:46:24.188 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:46:24.188 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:46:24.190 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:46:24.190 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:46:24.190 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:46:24.686 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:46:25.009 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:46:25.017 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.5108ms
[2022-07-12 15:46:25.017 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 338.8528ms
[2022-07-12 15:46:25.115 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:46:25.233 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.8443ms
[2022-07-12 15:46:35.673 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:46:35.836 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:46:35.836 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:46:35.838 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:46:35.838 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:46:35.838 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:46:36.398 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:46:36.658 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:46:36.661 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 267.0443ms
[2022-07-12 15:46:36.665 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.2599ms
[2022-07-12 15:46:36.768 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:46:36.866 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 97.8580ms
[2022-07-12 15:46:41.606 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:46:41.611 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:46:41.681 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:46:41.707 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:46:43.140 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:46:44.076 +07:00  INF]  Executed DbCommand (80ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:46:44.228 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 15:46:44.252 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2535.8607ms
[2022-07-12 15:46:44.254 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:46:44.271 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 2664.6453ms
[2022-07-12 15:48:20.640 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 15:48:20.803 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 15:48:20.803 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 15:48:20.805 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 15:48:20.805 +07:00  INF]  Hosting environment: Development
[2022-07-12 15:48:20.805 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 15:48:21.502 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 15:48:21.804 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 15:48:21.811 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 314.3233ms
[2022-07-12 15:48:21.811 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.3355ms
[2022-07-12 15:48:21.918 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 15:48:22.037 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.9471ms
[2022-07-12 15:48:28.517 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 15:48:28.521 +07:00  INF]  CORS policy execution successful.
[2022-07-12 15:48:28.580 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:48:28.601 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 15:48:30.254 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 15:48:31.177 +07:00  INF]  Executed DbCommand (78ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 15:48:31.327 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 15:48:31.341 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2733.9105ms
[2022-07-12 15:48:31.343 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 15:48:31.356 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 2839.3956ms
[2022-07-12 16:37:25.621 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 16:37:25.929 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 16:37:25.929 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 16:37:25.931 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 16:37:25.931 +07:00  INF]  Hosting environment: Development
[2022-07-12 16:37:25.931 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 16:37:26.900 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 16:37:27.173 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 277.0313ms
[2022-07-12 16:37:27.173 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 16:37:27.179 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 5.4971ms
[2022-07-12 16:37:27.402 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 16:37:27.499 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 97.4564ms
[2022-07-12 16:37:57.600 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 16:37:57.604 +07:00  INF]  CORS policy execution successful.
[2022-07-12 16:37:57.678 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:37:57.706 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 16:37:57.847 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 134.4539ms
[2022-07-12 16:37:57.851 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:37:57.852 +07:00  ERR]  An unhandled exception has occurred while executing the request.
FirebaseAdmin.Auth.FirebaseAuthException: Firebase ID token expired at 1657617562. Expected to be greater than 1657618677.
   at FirebaseAdmin.Auth.Jwt.FirebaseTokenVerifier.VerifyTokenAsync(String token, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken, Boolean checkRevoked, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken, CancellationToken cancellationToken)
   at FirebaseAdmin.Auth.AbstractFirebaseAuth.VerifyIdTokenAsync(String idToken)
   at API.Controllers.Admin.DriversController.LoginByEmail(LoginByEmailRequest request) in D:\DotNet_Study\projects\MaaS\API\Controllers\Admin\DriversController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-07-12 16:37:57.917 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 500 - text/plain;+charset=utf-8 317.3181ms
[2022-07-12 16:38:38.211 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 16:38:38.217 +07:00  INF]  CORS policy execution successful.
[2022-07-12 16:38:38.237 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:38:38.238 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 16:38:40.125 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 16:38:41.123 +07:00  INF]  Executed DbCommand (84ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 16:38:41.278 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 16:38:41.288 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 3050.0894ms
[2022-07-12 16:38:41.289 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:38:41.302 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 3090.7137ms
[2022-07-12 16:39:20.353 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 16:39:20.518 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 16:39:20.518 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 16:39:20.520 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 16:39:20.520 +07:00  INF]  Hosting environment: Development
[2022-07-12 16:39:20.520 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 16:39:21.404 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 16:39:21.696 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 16:39:21.721 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 326.5204ms
[2022-07-12 16:39:21.725 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 28.1580ms
[2022-07-12 16:39:21.808 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 16:39:21.907 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 99.0832ms
[2022-07-12 16:39:33.681 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 16:39:33.687 +07:00  INF]  CORS policy execution successful.
[2022-07-12 16:39:33.756 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:39:33.778 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 16:39:35.377 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 16:39:36.374 +07:00  INF]  Executed DbCommand (93ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r.name AS "RoleName"
FROM accounts AS a
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 16:39:36.515 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 16:39:36.529 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2745.8574ms
[2022-07-12 16:39:36.531 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:39:36.543 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 2862.0849ms
[2022-07-12 16:50:35.351 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 16:50:35.516 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 16:50:35.516 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 16:50:35.519 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 16:50:35.519 +07:00  INF]  Hosting environment: Development
[2022-07-12 16:50:35.519 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 16:50:35.940 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 16:50:36.197 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 16:50:36.204 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 6.2983ms
[2022-07-12 16:50:36.204 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 268.8276ms
[2022-07-12 16:50:36.306 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 16:50:36.421 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.8049ms
[2022-07-12 16:51:04.867 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 16:51:04.876 +07:00  INF]  CORS policy execution successful.
[2022-07-12 16:51:04.955 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:51:04.983 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 16:51:06.379 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 16:51:07.413 +07:00  INF]  Executed DbCommand (96ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.code AS "Code", u.name AS "Name", CASE
    WHEN a.registration_type = 0 THEN a.registration
    ELSE ''
END AS "Email", CASE
    WHEN a.registration_type = 1 THEN a.registration
    ELSE ''
END AS "PhoneNumber", u.date_of_birth AS "DateOfBirth", u.gender AS "Gender", r.name AS "RoleName", u.status AS "Status"
FROM accounts AS a
INNER JOIN users AS u ON a.user_id = u.id
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 16:51:07.567 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 16:51:07.581 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2592.5034ms
[2022-07-12 16:51:07.582 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 16:51:07.594 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 2727.3428ms
[2022-07-12 17:02:54.338 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 17:02:54.494 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 17:02:54.494 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 17:02:54.496 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 17:02:54.496 +07:00  INF]  Hosting environment: Development
[2022-07-12 17:02:54.496 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 17:02:55.094 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 17:02:55.412 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 17:02:55.420 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 329.1323ms
[2022-07-12 17:02:55.420 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.4241ms
[2022-07-12 17:02:55.528 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 17:02:55.646 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.6603ms
[2022-07-12 17:03:07.099 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 17:03:07.106 +07:00  INF]  CORS policy execution successful.
[2022-07-12 17:03:07.167 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 17:03:07.190 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 17:03:08.710 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 17:03:09.632 +07:00  INF]  Executed DbCommand (80ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.code AS "Code", u.name AS "Name", CASE
    WHEN a.registration_type = 0 THEN a.registration
    ELSE ''
END AS "Email", CASE
    WHEN a.registration_type = 1 THEN a.registration
    ELSE ''
END AS "PhoneNumber", r.name AS "RoleName"
FROM accounts AS a
INNER JOIN users AS u ON a.user_id = u.id
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 17:03:09.791 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 17:03:09.806 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2610.4791ms
[2022-07-12 17:03:09.807 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 17:03:09.820 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 2720.0358ms
[2022-07-12 17:07:21.025 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 17:07:21.311 +07:00  INF]  Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "MaaSDB" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'MaaSDB';
[2022-07-12 17:07:21.393 +07:00  INF]  Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "MaaSDB";
[2022-07-12 17:07:34.814 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 17:07:44.121 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 17:07:44.563 +07:00  INF]  Executed DbCommand (204ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "MaaSDB";
[2022-07-12 17:07:44.711 +07:00  INF]  Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[2022-07-12 17:07:44.744 +07:00  INF]  Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
[2022-07-12 17:07:44.747 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2022-07-12 17:07:44.759 +07:00  INF]  Applying migration '20220712100735_InitialDB'.
[2022-07-12 17:07:44.810 +07:00  INF]  Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE roles (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    description character varying(100) NOT NULL,
    name character varying(20) NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_roles" PRIMARY KEY (id)
);
[2022-07-12 17:07:44.817 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE users (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    code uuid NOT NULL,
    name character varying(50) NOT NULL,
    gender integer NOT NULL,
    status integer NOT NULL,
    date_of_birth timestamp with time zone NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_users" PRIMARY KEY (id)
);
[2022-07-12 17:07:44.828 +07:00  INF]  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE accounts (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    user_id integer NOT NULL,
    registration character varying(30) NOT NULL,
    registration_type integer NOT NULL,
    verified boolean NOT NULL DEFAULT FALSE,
    role_id integer NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_accounts" PRIMARY KEY (id),
    CONSTRAINT "FK_accounts_roles_role_id" FOREIGN KEY (role_id) REFERENCES roles (id) ON DELETE CASCADE,
    CONSTRAINT "FK_accounts_users_user_id" FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
[2022-07-12 17:07:44.835 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE verified_codes (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    account_id integer NOT NULL,
    expired_time timestamp with time zone NOT NULL,
    code character varying(10) NOT NULL,
    created_at timestamp with time zone NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_verified_codes" PRIMARY KEY (id),
    CONSTRAINT "FK_verified_codes_accounts_account_id" FOREIGN KEY (account_id) REFERENCES accounts (id) ON DELETE CASCADE
);
[2022-07-12 17:07:44.839 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (1, TIMESTAMPTZ '2022-07-12 10:07:34.853097Z', 0, NULL, 'Role for driver', 'DRIVER', TIMESTAMPTZ '2022-07-12 10:07:34.853097Z', 0);
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (2, TIMESTAMPTZ '2022-07-12 10:07:34.853099Z', 0, NULL, 'Role for booker', 'BOOKER', TIMESTAMPTZ '2022-07-12 10:07:34.853099Z', 0);
[2022-07-12 17:07:44.841 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (1, 'f0138da0-c560-44a3-9400-7b223b8d06d8', TIMESTAMPTZ '2022-07-12 10:07:34.8531Z', 0, TIMESTAMPTZ '2022-07-12 10:07:34.853102Z', NULL, 1, 'Quach Dai Loi', 1, TIMESTAMPTZ '2022-07-12 10:07:34.8531Z', 0);
[2022-07-12 17:07:44.843 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (1, TIMESTAMPTZ '2022-07-12 10:07:34.853104Z', 0, NULL, 'loiqdse140970@fpt.edu.vn', 0, 1, TIMESTAMPTZ '2022-07-12 10:07:34.853104Z', 0, 1, TRUE);
[2022-07-12 17:07:44.846 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_accounts_registration_role_id" ON accounts (registration, role_id);
[2022-07-12 17:07:44.849 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_role_id" ON accounts (role_id);
[2022-07-12 17:07:44.852 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_user_id" ON accounts (user_id);
[2022-07-12 17:07:44.855 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_roles_description" ON roles (description);
[2022-07-12 17:07:44.859 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_verified_codes_account_id" ON verified_codes (account_id);
[2022-07-12 17:07:44.864 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('roles', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM roles) + 1,
        nextval(pg_get_serial_sequence('roles', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('users', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM users) + 1,
        nextval(pg_get_serial_sequence('users', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('accounts', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM accounts) + 1,
        nextval(pg_get_serial_sequence('accounts', 'id'))),
    false);
[2022-07-12 17:07:44.865 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220712100735_InitialDB', '6.0.6');
[2022-07-12 17:11:47.447 +07:00  INF]  User profile is available. Using 'C:\Users\quach\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-07-12 17:11:47.644 +07:00  INF]  Now listening on: https://localhost:7019
[2022-07-12 17:11:47.644 +07:00  INF]  Now listening on: http://localhost:5019
[2022-07-12 17:11:47.646 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-07-12 17:11:47.646 +07:00  INF]  Hosting environment: Development
[2022-07-12 17:11:47.646 +07:00  INF]  Content root path: D:\DotNet_Study\projects\MaaS\API\
[2022-07-12 17:11:48.148 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-07-12 17:11:48.402 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-07-12 17:11:48.410 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11964 application/javascript;+charset=utf-8 7.2598ms
[2022-07-12 17:11:48.410 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 267.6292ms
[2022-07-12 17:11:48.544 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-07-12 17:11:48.661 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.3126ms
[2022-07-12 17:12:32.740 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195
[2022-07-12 17:12:32.745 +07:00  INF]  CORS policy execution successful.
[2022-07-12 17:12:32.817 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 17:12:32.848 +07:00  INF]  Route matched with {action = "LoginByEmail", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginByEmail(API.Models.Requests.LoginByEmailRequest) on controller API.Controllers.Admin.DriversController (API).
[2022-07-12 17:12:34.486 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-12 17:12:35.455 +07:00  INF]  Executed DbCommand (80ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.code AS "Code", u.name AS "Name", u.gender AS "Gender", u.status AS "Status", u.date_of_birth AS "DateOfBirth", CASE
    WHEN a.registration_type = 0 THEN a.registration
    ELSE ''
END AS "Email", CASE
    WHEN a.registration_type = 1 THEN a.registration
    ELSE ''
END AS "PhoneNumber", r.name AS "RoleName"
FROM accounts AS a
INNER JOIN users AS u ON a.user_id = u.id
INNER JOIN roles AS r ON a.role_id = r.id
WHERE (a.registration = @__email_0) AND (a.registration_type = 0)
LIMIT 1
[2022-07-12 17:12:35.612 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-07-12 17:12:35.627 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginByEmail (API) in 2773.9778ms
[2022-07-12 17:12:35.628 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginByEmail (API)'
[2022-07-12 17:12:35.640 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/login-by-email application/json 1195 - 200 - application/json;+charset=utf-8 2900.1360ms
