[2022-08-05 12:52:00.368 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 12:52:00.635 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 12:52:00.635 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 12:52:00.637 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 12:52:00.637 +07:00  INF]  Hosting environment: Development
[2022-08-05 12:52:00.637 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 12:52:01.127 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 12:52:01.689 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 12:52:01.690 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 12:52:01.723 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 19.2573ms
[2022-08-05 12:52:01.723 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 595.6283ms
[2022-08-05 12:52:01.768 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 78.6309ms
[2022-08-05 12:52:01.898 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 12:52:02.151 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 253.0145ms
[2022-08-05 12:53:17.323 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 12:53:17.645 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 12:53:17.647 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 12:53:17.652 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 12:53:17.652 +07:00  INF]  Hosting environment: Development
[2022-08-05 12:53:17.652 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 12:53:18.525 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 12:53:19.002 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 478.0261ms
[2022-08-05 12:53:19.030 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 12:53:19.030 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 12:53:19.056 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 25.0747ms
[2022-08-05 12:53:19.231 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 201.0856ms
[2022-08-05 12:53:19.377 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 12:53:19.675 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 298.1844ms
[2022-08-05 12:54:05.311 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 12:54:05.737 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 12:54:05.739 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 12:54:05.744 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 12:54:05.744 +07:00  INF]  Hosting environment: Development
[2022-08-05 12:54:05.744 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 12:54:06.322 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 12:54:07.071 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 12:54:07.071 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 12:54:07.121 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 46.7198ms
[2022-08-05 12:54:07.122 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 812.5579ms
[2022-08-05 12:54:07.222 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 151.8861ms
[2022-08-05 12:54:07.369 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 12:54:07.671 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 301.9931ms
[2022-08-05 12:54:20.883 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/phone/loginfake - 0
[2022-08-05 12:54:20.894 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:54:20.982 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.LoginFake (API)'
[2022-08-05 12:54:20.999 +07:00  INF]  Route matched with {action = "LoginFake", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginFake() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:54:22.598 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 12:54:23.611 +07:00  INF]  Executed DbCommand (99ms) [Parameters=[@__role_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r.id, r.created_at, r.created_by, r.deleted_at, r.description, r.name, r.updated_at, r.updated_by
FROM accounts AS a
LEFT JOIN roles AS r ON a.role_id = r.id
WHERE a.role_id = @__role_0
LIMIT 1
[2022-08-05 12:54:23.920 +07:00  INF]  Executed DbCommand (17ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 12:54:24.154 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:54:24.180 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.LoginFake (API) in 3169.2569ms
[2022-08-05 12:54:24.181 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.LoginFake (API)'
[2022-08-05 12:54:24.197 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/phone/loginfake - 0 - 200 - application/json;+charset=utf-8 3313.9964ms
[2022-08-05 12:54:47.003 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/drivers/phone/loginfake - 0
[2022-08-05 12:54:47.011 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:54:47.012 +07:00  INF]  Executing endpoint 'API.Controllers.Admin.DriversController.LoginFake (API)'
[2022-08-05 12:54:47.016 +07:00  INF]  Route matched with {action = "LoginFake", controller = "Drivers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginFake() on controller API.Controllers.Admin.DriversController (API).
[2022-08-05 12:54:47.105 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__role_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r.id, r.created_at, r.created_by, r.deleted_at, r.description, r.name, r.updated_at, r.updated_by
FROM accounts AS a
LEFT JOIN roles AS r ON a.role_id = r.id
WHERE a.role_id = @__role_0
LIMIT 1
[2022-08-05 12:54:47.110 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 12:54:47.113 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:54:47.113 +07:00  INF]  Executed action API.Controllers.Admin.DriversController.LoginFake (API) in 97.0757ms
[2022-08-05 12:54:47.113 +07:00  INF]  Executed endpoint 'API.Controllers.Admin.DriversController.LoginFake (API)'
[2022-08-05 12:54:47.113 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/drivers/phone/loginfake - 0 - 200 - application/json;+charset=utf-8 110.7605ms
[2022-08-05 12:55:40.649 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103
[2022-08-05 12:55:40.662 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:55:40.670 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:55:40.687 +07:00  INF]  Route matched with {action = "RefreshToken", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(API.Models.Requests.RefreshTokenRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:55:40.871 +07:00  INF]  Executing OkObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:55:40.875 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.RefreshToken (API) in 188.0548ms
[2022-08-05 12:55:40.875 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:55:40.875 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103 - 200 - application/json;+charset=utf-8 226.8328ms
[2022-08-05 12:56:24.731 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103
[2022-08-05 12:56:24.732 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:56:24.733 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:24.734 +07:00  INF]  Route matched with {action = "RefreshToken", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(API.Models.Requests.RefreshTokenRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:56:24.747 +07:00  INF]  Executing OkObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:56:24.747 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.RefreshToken (API) in 12.9446ms
[2022-08-05 12:56:24.747 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:24.747 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103 - 200 - application/json;+charset=utf-8 16.3970ms
[2022-08-05 12:56:28.033 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103
[2022-08-05 12:56:28.033 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:56:28.033 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:28.033 +07:00  INF]  Route matched with {action = "RefreshToken", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(API.Models.Requests.RefreshTokenRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:56:28.034 +07:00  INF]  Executing OkObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:56:28.034 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.RefreshToken (API) in 0.8494ms
[2022-08-05 12:56:28.034 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:28.034 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103 - 200 - application/json;+charset=utf-8 1.4791ms
[2022-08-05 12:56:29.216 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103
[2022-08-05 12:56:29.216 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:56:29.216 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:29.216 +07:00  INF]  Route matched with {action = "RefreshToken", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(API.Models.Requests.RefreshTokenRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:56:29.217 +07:00  INF]  Executing OkObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:56:29.217 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.RefreshToken (API) in 1.0193ms
[2022-08-05 12:56:29.217 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:29.217 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103 - 200 - application/json;+charset=utf-8 1.9597ms
[2022-08-05 12:56:50.288 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103
[2022-08-05 12:56:50.288 +07:00  INF]  CORS policy execution successful.
[2022-08-05 12:56:50.288 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:56:50.289 +07:00  INF]  Route matched with {action = "RefreshToken", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(API.Models.Requests.RefreshTokenRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:57:00.060 +07:00  INF]  Executing OkObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:57:00.060 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.RefreshToken (API) in 9770.5771ms
[2022-08-05 12:57:00.060 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.RefreshToken (API)'
[2022-08-05 12:57:00.060 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/refresh-access-token application/json 2103 - 200 - application/json;+charset=utf-8 9772.5490ms
[2022-08-05 12:57:54.614 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 12:57:54.627 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:57:54.640 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:57:54.707 +07:00  INF]  Executed DbCommand (12ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 12:57:54.727 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 12:57:56.395 +07:00  INF]  Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 12:57:56.405 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:57:56.405 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 1765.5895ms
[2022-08-05 12:57:56.405 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:57:56.628 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 2013.8431ms
[2022-08-05 12:57:56.628 +07:00  ERR]  Domain.Entities.VerifiedCode Add function error.
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AppDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Data.Repositories.GenericRepository`1.Add(T entity) in G:\.NET Core\ViGoAPI\ViGoAPI\Infrastructure\Data\Repositories\GenericRepository.cs:line 34
[2022-08-05 12:58:14.477 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 12:58:14.477 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:58:14.477 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:58:14.485 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 12:58:14.488 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 12:58:14.885 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 12:58:14.886 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:58:14.886 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 409.0426ms
[2022-08-05 12:58:14.886 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:58:14.889 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 412.7823ms
[2022-08-05 12:58:14.961 +07:00  ERR]  Domain.Entities.VerifiedCode Add function error.
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AppDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Data.Repositories.GenericRepository`1.Add(T entity) in G:\.NET Core\ViGoAPI\ViGoAPI\Infrastructure\Data\Repositories\GenericRepository.cs:line 34
[2022-08-05 12:58:29.032 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 12:58:29.032 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:58:29.032 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:58:29.035 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 12:58:29.038 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 12:58:29.436 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 12:58:29.437 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:58:29.437 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 404.6958ms
[2022-08-05 12:58:29.437 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:58:29.439 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 407.0313ms
[2022-08-05 12:58:29.501 +07:00  ERR]  Domain.Entities.VerifiedCode Add function error.
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AppDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Data.Repositories.GenericRepository`1.Add(T entity) in G:\.NET Core\ViGoAPI\ViGoAPI\Infrastructure\Data\Repositories\GenericRepository.cs:line 34
[2022-08-05 12:58:41.788 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 12:58:41.789 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:58:41.789 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 12:58:41.791 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 12:58:41.795 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 12:58:42.199 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 12:58:42.200 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 12:58:42.201 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 411.8496ms
[2022-08-05 12:58:42.201 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 12:58:42.203 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 414.1843ms
[2022-08-05 12:58:42.213 +07:00  ERR]  An error occurred using a transaction.
[2022-08-05 12:58:42.263 +07:00  ERR]  Domain.Entities.VerifiedCode Add function error.
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AppDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Data.Repositories.GenericRepository`1.Add(T entity) in G:\.NET Core\ViGoAPI\ViGoAPI\Infrastructure\Data\Repositories\GenericRepository.cs:line 34
[2022-08-05 13:01:26.701 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:01:27.194 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:01:27.194 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:01:27.198 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:01:27.198 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:01:27.198 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:01:28.586 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:01:29.000 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:01:29.000 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:01:29.018 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 435.3451ms
[2022-08-05 13:01:29.018 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 15.3107ms
[2022-08-05 13:01:29.035 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 35.1540ms
[2022-08-05 13:01:29.184 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:01:29.398 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 213.5473ms
[2022-08-05 13:01:39.076 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=0377322919 - -
[2022-08-05 13:01:39.191 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:01:39.231 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:01:41.144 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 13:01:42.539 +07:00  INF]  Executed DbCommand (125ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:01:42.602 +07:00  INF]  Executing NotFoundObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:01:42.618 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 3380.3262ms
[2022-08-05 13:01:42.621 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:01:42.645 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=0377322919 - - - 404 - application/json;+charset=utf-8 3569.0844ms
[2022-08-05 13:01:54.751 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 13:01:54.758 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:01:54.758 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:01:54.778 +07:00  INF]  Executed DbCommand (14ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:01:54.959 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:01:56.694 +07:00  INF]  Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 13:01:56.810 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:01:56.813 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 2054.3916ms
[2022-08-05 13:01:56.813 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:01:56.815 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 2063.4499ms
[2022-08-05 13:02:22.825 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 13:02:22.828 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:02:22.828 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:02:22.840 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:02:22.849 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:02:22.854 +07:00  INF]  Executing BadRequestObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:02:22.854 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 25.4961ms
[2022-08-05 13:02:22.854 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:02:22.854 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 400 - application/json;+charset=utf-8 29.2025ms
[2022-08-05 13:03:16.222 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54
[2022-08-05 13:03:16.241 +07:00  INF]  CORS policy execution successful.
[2022-08-05 13:03:16.242 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:03:16.249 +07:00  INF]  Route matched with {action = "PhoneLogin", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PhoneLogin(API.Models.Requests.PhoneLoginRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:03:16.279 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32), @__otp_3='?'], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE (((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)) AND (v.code = @__otp_3)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:03:16.286 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
INNER JOIN users AS u ON a.user_id = u.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:03:16.435 +07:00  INF]  Executed DbCommand (8ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 13:03:16.734 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:03:16.745 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.PhoneLogin (API) in 495.945ms
[2022-08-05 13:03:16.745 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:03:16.746 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54 - 200 - application/json;+charset=utf-8 523.2477ms
[2022-08-05 13:16:36.245 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:16:36.479 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:16:36.480 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:16:36.484 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:16:36.484 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:16:36.484 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:16:37.347 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:16:37.830 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:16:37.830 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:16:37.851 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 496.4715ms
[2022-08-05 13:16:37.851 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 14.3970ms
[2022-08-05 13:16:37.878 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 48.1341ms
[2022-08-05 13:16:38.011 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:16:38.208 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.9260ms
[2022-08-05 13:17:36.346 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 13:17:36.447 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:17:36.476 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:17:38.106 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 13:17:39.221 +07:00  INF]  Executed DbCommand (107ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:17:39.406 +07:00  INF]  Executed DbCommand (10ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:17:41.034 +07:00  INF]  Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 13:17:41.117 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:17:41.129 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 4646.2135ms
[2022-08-05 13:17:41.130 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:17:41.152 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 4805.9599ms
[2022-08-05 13:18:01.137 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54
[2022-08-05 13:18:01.150 +07:00  INF]  CORS policy execution successful.
[2022-08-05 13:18:01.153 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:18:01.165 +07:00  INF]  Route matched with {action = "PhoneLogin", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PhoneLogin(API.Models.Requests.PhoneLoginRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:18:01.189 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32), @__otp_3='?'], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE (((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)) AND (v.code = @__otp_3)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:18:01.197 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:18:01.321 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 13:18:01.542 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:18:01.552 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.PhoneLogin (API) in 387.3612ms
[2022-08-05 13:18:01.552 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:18:01.552 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54 - 200 - application/json;+charset=utf-8 415.4574ms
[2022-08-05 13:18:16.060 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:18:16.068 +07:00  INF]  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (BOOKER)
[2022-08-05 13:18:16.078 +07:00  INF]  AuthenticationScheme: Bearer was challenged.
[2022-08-05 13:18:16.078 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 401 0 - 18.6864ms
[2022-08-05 13:19:01.683 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:19:02.162 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII of type 'System.Net.Http.HttpResponseMessage' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:19:02.199 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII of type 'System.Net.Http.HttpResponseMessage' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:19:02.209 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 526.3080ms
[2022-08-05 13:20:43.014 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:20:43.026 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:20:43.027 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:20:43.028 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 14.2623ms
[2022-08-05 13:25:35.857 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:25:35.867 +07:00  INF]  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (BOOKER)
[2022-08-05 13:25:35.867 +07:00  INF]  AuthenticationScheme: Bearer was challenged.
[2022-08-05 13:25:35.867 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 401 0 - 10.7481ms
[2022-08-05 13:25:51.098 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:25:51.386 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII of type 'System.Net.Http.HttpResponseMessage' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:25:51.388 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII of type 'System.Net.Http.HttpResponseMessage' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:25:51.389 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 291.3270ms
[2022-08-05 13:26:28.441 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:26:28.687 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:26:28.687 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:26:28.690 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:26:28.690 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:26:28.690 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:26:29.232 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:26:29.639 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:26:29.639 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:26:29.640 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 414.7965ms
[2022-08-05 13:26:29.672 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 32.5916ms
[2022-08-05 13:26:29.703 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 63.6819ms
[2022-08-05 13:26:29.811 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:26:30.156 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 344.1968ms
[2022-08-05 13:26:43.834 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:26:44.275 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII of type 'System.Net.Http.HttpResponseMessage' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:26:44.308 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII of type 'System.Net.Http.HttpResponseMessage' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:26:44.312 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 478.2079ms
[2022-08-05 13:29:47.569 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:29:47.872 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:29:47.873 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:29:47.876 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:29:47.876 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:29:47.876 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:29:48.498 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:29:48.881 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:29:48.881 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:29:48.909 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 17.8908ms
[2022-08-05 13:29:48.911 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 425.0461ms
[2022-08-05 13:29:48.933 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 51.9444ms
[2022-08-05 13:29:49.045 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:29:49.251 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.3428ms
[2022-08-05 13:30:09.544 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/phone/loginfake - 0
[2022-08-05 13:30:09.576 +07:00  INF]  CORS policy execution successful.
[2022-08-05 13:30:09.651 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.LoginFake (API)'
[2022-08-05 13:30:09.669 +07:00  INF]  Route matched with {action = "LoginFake", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginFake() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:30:11.221 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 13:30:12.238 +07:00  INF]  Executed DbCommand (93ms) [Parameters=[@__role_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r.id, r.created_at, r.created_by, r.deleted_at, r.description, r.name, r.updated_at, r.updated_by
FROM accounts AS a
LEFT JOIN roles AS r ON a.role_id = r.id
WHERE a.role_id = @__role_0
LIMIT 1
[2022-08-05 13:30:12.558 +07:00  INF]  Executed DbCommand (16ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 13:30:12.801 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:30:12.821 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.LoginFake (API) in 3145.2475ms
[2022-08-05 13:30:12.822 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.LoginFake (API)'
[2022-08-05 13:30:12.837 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/phone/loginfake - 0 - 200 - application/json;+charset=utf-8 3292.8529ms
[2022-08-05 13:30:36.393 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 13:30:36.397 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:30:36.413 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:30:36.481 +07:00  INF]  Executed DbCommand (12ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:30:36.502 +07:00  INF]  Executed DbCommand (8ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:30:38.134 +07:00  INF]  Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 13:30:38.206 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:30:38.206 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 1793.5826ms
[2022-08-05 13:30:38.206 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:30:38.207 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 1813.8937ms
[2022-08-05 13:30:55.211 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54
[2022-08-05 13:30:55.212 +07:00  INF]  CORS policy execution successful.
[2022-08-05 13:30:55.214 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:30:55.217 +07:00  INF]  Route matched with {action = "PhoneLogin", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PhoneLogin(API.Models.Requests.PhoneLoginRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:30:55.249 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32), @__otp_3='?'], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE (((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)) AND (v.code = @__otp_3)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:30:55.256 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:30:55.258 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 13:30:55.260 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:30:55.260 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.PhoneLogin (API) in 43.098ms
[2022-08-05 13:30:55.260 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:30:55.260 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54 - 200 - application/json;+charset=utf-8 49.1672ms
[2022-08-05 13:31:18.598 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:31:18.904 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://securetoken.google.com/maas/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: 'https://securetoken.google.com/maas/.well-known/openid-configuration'. HttpResponseMessage: 'StatusCode: 404, ReasonPhrase: 'Not Found', Version: 1.1, Content: System.Net.Http.HttpConnectionResponseContent, Headers:
{
  Cross-Origin-Resource-Policy: cross-origin
  X-Content-Type-Options: nosniff
  Date: Fri, 05 Aug 2022 06:31:13 GMT
  Server: sffe
  X-XSS-Protection: 0
  Alt-Svc: h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"
  Content-Type: text/html; charset=utf-8
  Content-Length: 1598
}', HttpResponseMessage.Content: '<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Not Found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  </style>
  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/maas/.well-known/openid-configuration</code> was not found on this server.  <ins>That’s all we know.</ins>
'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:31:18.948 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://securetoken.google.com/maas/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: 'https://securetoken.google.com/maas/.well-known/openid-configuration'. HttpResponseMessage: 'StatusCode: 404, ReasonPhrase: 'Not Found', Version: 1.1, Content: System.Net.Http.HttpConnectionResponseContent, Headers:
{
  Cross-Origin-Resource-Policy: cross-origin
  X-Content-Type-Options: nosniff
  Date: Fri, 05 Aug 2022 06:31:13 GMT
  Server: sffe
  X-XSS-Protection: 0
  Alt-Svc: h3=":443"; ma=2592000,h3-29=":443"; ma=2592000,h3-Q050=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,quic=":443"; ma=2592000; v="46,43"
  Content-Type: text/html; charset=utf-8
  Content-Length: 1598
}', HttpResponseMessage.Content: '<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Not Found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  </style>
  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/maas/.well-known/openid-configuration</code> was not found on this server.  <ins>That’s all we know.</ins>
'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:31:18.952 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 354.6379ms
[2022-08-05 13:34:01.446 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:34:01.680 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:34:01.680 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:34:01.683 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:34:01.683 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:34:01.683 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:34:02.224 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:34:02.633 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:34:02.633 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:34:02.636 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 417.0169ms
[2022-08-05 13:34:02.654 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 21.0393ms
[2022-08-05 13:34:02.685 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 51.8383ms
[2022-08-05 13:34:02.821 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:34:03.052 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 230.9640ms
[2022-08-05 13:34:16.898 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:34:16.992 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'VigoAppFPTUniversity/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: 'VigoAppFPTUniversity/.well-known/openid-configuration'.
 ---> System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.CheckRequestBeforeSend(HttpRequestMessage request)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:34:17.022 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'VigoAppFPTUniversity/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: 'VigoAppFPTUniversity/.well-known/openid-configuration'.
 ---> System.InvalidOperationException: An invalid request URI was provided. Either the request URI must be an absolute URI or BaseAddress must be set.
   at System.Net.Http.HttpClient.PrepareRequestMessage(HttpRequestMessage request)
   at System.Net.Http.HttpClient.CheckRequestBeforeSend(HttpRequestMessage request)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:34:17.026 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 128.4863ms
[2022-08-05 13:37:26.118 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:37:26.353 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:37:26.353 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:37:26.356 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:37:26.356 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:37:26.356 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:37:26.956 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:37:27.333 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:37:27.333 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:37:27.358 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 405.9069ms
[2022-08-05 13:37:27.374 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 40.9099ms
[2022-08-05 13:37:27.390 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.1114ms
[2022-08-05 13:37:27.481 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:37:27.632 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 151.7427ms
[2022-08-05 13:37:52.108 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:37:52.368 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:37:52.368 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:37:52.371 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:37:52.371 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:37:52.371 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:37:53.022 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:37:53.433 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 411.7518ms
[2022-08-05 13:37:53.442 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:37:53.442 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:37:53.455 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 11.4924ms
[2022-08-05 13:37:53.471 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 28.3380ms
[2022-08-05 13:37:53.566 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:37:53.704 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 138.1774ms
[2022-08-05 13:38:04.009 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - -
[2022-08-05 13:38:04.092 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:38:04.127 +07:00  INF]  Route matched with {action = "SendPhoneLoginOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneLoginOtp(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:38:05.820 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 13:38:06.910 +07:00  INF]  Executed DbCommand (102ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:38:07.085 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:38:08.687 +07:00  INF]  Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 13:38:08.764 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:38:08.779 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API) in 4643.4467ms
[2022-08-05 13:38:08.780 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneLoginOtp (API)'
[2022-08-05 13:38:08.799 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-login-otp?PhoneNumber=%2B84377322919 - - - 200 - application/json;+charset=utf-8 4790.0244ms
[2022-08-05 13:38:24.492 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54
[2022-08-05 13:38:24.499 +07:00  INF]  CORS policy execution successful.
[2022-08-05 13:38:24.501 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:38:24.505 +07:00  INF]  Route matched with {action = "PhoneLogin", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PhoneLogin(API.Models.Requests.PhoneLoginRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:38:24.526 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32), @__otp_3='?'], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE (((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)) AND (v.code = @__otp_3)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 13:38:24.537 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 13:38:24.663 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__account_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.id = @__account_UserId_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 13:38:24.920 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 13:38:24.929 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.PhoneLogin (API) in 424.3306ms
[2022-08-05 13:38:24.929 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.PhoneLogin (API)'
[2022-08-05 13:38:24.929 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/phone/login application/json 54 - 200 - application/json;+charset=utf-8 436.9865ms
[2022-08-05 13:38:54.813 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:38:54.882 +07:00  INF]  Request starting HTTP/1.1 GET https://localhost:7019/.well-known/openid-configuration - -
[2022-08-05 13:38:54.885 +07:00  INF]  Request finished HTTP/1.1 GET https://localhost:7019/.well-known/openid-configuration - - - 404 0 - 3.1098ms
[2022-08-05 13:38:54.896 +07:00  ERR]  Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:7019/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: 'https://localhost:7019/.well-known/openid-configuration'. HttpResponseMessage: 'StatusCode: 404, ReasonPhrase: 'Not Found', Version: 1.1, Content: System.Net.Http.HttpConnectionResponseContent, Headers:
{
  Date: Fri, 05 Aug 2022 06:38:54 GMT
  Server: Kestrel
  Content-Length: 0
}', HttpResponseMessage.Content: ''.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2022-08-05 13:38:54.929 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: 'https://localhost:7019/.well-known/openid-configuration'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: 'https://localhost:7019/.well-known/openid-configuration'. HttpResponseMessage: 'StatusCode: 404, ReasonPhrase: 'Not Found', Version: 1.1, Content: System.Net.Http.HttpConnectionResponseContent, Headers:
{
  Date: Fri, 05 Aug 2022 06:38:54 GMT
  Server: Kestrel
  Content-Length: 0
}', HttpResponseMessage.Content: ''.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:38:54.934 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 121.0532ms
[2022-08-05 13:47:15.238 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 13:47:15.490 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 13:47:15.490 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 13:47:15.493 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 13:47:15.493 +07:00  INF]  Hosting environment: Development
[2022-08-05 13:47:15.493 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 13:47:16.178 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 13:47:16.527 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 348.0672ms
[2022-08-05 13:47:16.528 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 13:47:16.528 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 13:47:16.549 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 20.4186ms
[2022-08-05 13:47:16.562 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.9724ms
[2022-08-05 13:47:16.648 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 13:47:16.918 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 269.1776ms
[2022-08-05 13:47:31.754 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 13:47:32.023 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 13:47:32.046 +07:00  INF]  Route matched with {action = "SendGmailOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendGmailOtp() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 13:47:38.773 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 13:47:39.840 +07:00  INF]  Executed DbCommand (99ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
FROM users AS u
WHERE u.code::text = @__code_0
LIMIT 1
[2022-08-05 13:47:40.169 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendGmailOtp (API) in 8116.585ms
[2022-08-05 13:47:40.173 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 13:47:40.179 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Where[TSource](IEnumerable`1 source, Func`2 predicate)
   at API.Services.AccountService.GetAccountByUserCode(String userCode, RegistrationTypes registrationTypes) in G:\.NET Core\ViGoAPI\ViGoAPI\API\Services\AccountService.cs:line 25
   at API.Controllers.Booker.BookersController.SendGmailOtp() in G:\.NET Core\ViGoAPI\ViGoAPI\API\Controllers\Booker\BookersController.cs:line 144
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 13:47:40.445 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 8691.5635ms
[2022-08-05 14:01:40.631 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 14:01:40.877 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 14:01:40.878 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 14:01:40.884 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 14:01:40.884 +07:00  INF]  Hosting environment: Development
[2022-08-05 14:01:40.884 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 14:01:41.263 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 14:01:41.733 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 14:01:41.734 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 14:01:41.754 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 481.8318ms
[2022-08-05 14:01:41.764 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 24.9690ms
[2022-08-05 14:01:41.787 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.0864ms
[2022-08-05 14:01:41.935 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 14:01:42.170 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 235.2112ms
[2022-08-05 14:02:03.502 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 14:02:03.852 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:02:03.877 +07:00  INF]  Route matched with {action = "SendGmailOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendGmailOtp() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:02:05.967 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 14:02:07.404 +07:00  INF]  Executed DbCommand (170ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
FROM users AS u
WHERE u.code::text = @__code_0
LIMIT 1
[2022-08-05 14:02:07.851 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendGmailOtp (API) in 3967.4013ms
[2022-08-05 14:02:07.853 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:02:07.864 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'source')
   at System.Linq.ThrowHelper.ThrowArgumentNullException(ExceptionArgument argument)
   at System.Linq.Enumerable.Where[TSource](IEnumerable`1 source, Func`2 predicate)
   at API.Services.AccountService.GetAccountByUserCode(String userCode, RegistrationTypes registrationTypes) in G:\.NET Core\ViGoAPI\ViGoAPI\API\Services\AccountService.cs:line 25
   at API.Controllers.Booker.BookersController.SendGmailOtp() in G:\.NET Core\ViGoAPI\ViGoAPI\API\Controllers\Booker\BookersController.cs:line 144
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 14:02:07.951 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 4450.4364ms
[2022-08-05 14:02:21.621 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 14:02:21.627 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:02:21.627 +07:00  INF]  Route matched with {action = "SendGmailOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendGmailOtp() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:03:27.252 +07:00  INF]  Executed DbCommand (10ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
FROM users AS u
WHERE u.code::text = @__code_0
LIMIT 1
[2022-08-05 14:04:26.532 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendGmailOtp (API) in 124904.7915ms
[2022-08-05 14:04:26.533 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:04:26.534 +07:00  ERR]  An unhandled exception has occurred while executing the request.
System.ArgumentException: Delegate to an instance method cannot have null 'this'.
   at System.MulticastDelegate.ThrowNullThisInDelegateToInstance()
   at System.MulticastDelegate.CtorClosed(Object target, IntPtr methodPtr)
   at API.Services.AccountService.GetAccountByUserCode(String userCode, RegistrationTypes registrationTypes)
   at API.Controllers.Booker.BookersController.SendGmailOtp()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 14:04:26.536 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 500 - text/plain;+charset=utf-8 124915.7896ms
[2022-08-05 14:04:27.431 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 14:04:27.470 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 38.9313ms
[2022-08-05 14:04:27.481 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 14:04:27.481 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 14:04:27.482 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 0.4926ms
[2022-08-05 14:04:27.514 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.5447ms
[2022-08-05 14:04:27.645 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 14:04:27.650 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 5.5305ms
[2022-08-05 14:04:27.835 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/favicon-32x32.png - -
[2022-08-05 14:04:27.866 +07:00  INF]  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2022-08-05 14:04:27.866 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/favicon-32x32.png - - - 200 628 image/png 31.9613ms
[2022-08-05 14:08:23.903 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 14:08:24.167 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 14:08:24.167 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 14:08:24.172 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 14:08:24.172 +07:00  INF]  Hosting environment: Development
[2022-08-05 14:08:24.172 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 14:08:24.551 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 14:08:24.929 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 374.8233ms
[2022-08-05 14:08:24.954 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 14:08:24.955 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 14:08:24.971 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 16.6319ms
[2022-08-05 14:08:24.996 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 42.2755ms
[2022-08-05 14:08:25.121 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 14:08:25.378 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 256.5557ms
[2022-08-05 14:08:41.156 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - -
[2022-08-05 14:08:41.569 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:08:41.592 +07:00  INF]  Route matched with {action = "SendGmailOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendGmailOtp() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:08:43.679 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 14:08:45.313 +07:00  INF]  Executed DbCommand (168ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.code::text = @__code_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 14:08:45.701 +07:00  INF]  Executed DbCommand (29ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 14:08:50.617 +07:00  INF]  Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 14:08:50.693 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 14:08:50.706 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendGmailOtp (API) in 9107.3354ms
[2022-08-05 14:08:50.708 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:08:50.726 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp - - - 200 - application/json;+charset=utf-8 9570.2344ms
[2022-08-05 14:14:30.240 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 14:14:30.485 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 14:14:30.485 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 14:14:30.489 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 14:14:30.489 +07:00  INF]  Hosting environment: Development
[2022-08-05 14:14:30.489 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 14:14:31.214 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 14:14:31.623 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 14:14:31.628 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 14:14:31.658 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 446.3427ms
[2022-08-05 14:14:31.658 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 29.8248ms
[2022-08-05 14:14:31.702 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 74.7021ms
[2022-08-05 14:14:31.840 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 14:14:32.176 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 336.2718ms
[2022-08-05 14:16:49.348 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 14:16:49.623 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 14:16:49.623 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 14:16:49.626 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 14:16:49.626 +07:00  INF]  Hosting environment: Development
[2022-08-05 14:16:49.626 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 14:16:50.410 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 14:16:50.795 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 14:16:50.798 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 14:16:50.845 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 438.6340ms
[2022-08-05 14:16:50.845 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 47.8504ms
[2022-08-05 14:16:50.879 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 81.2468ms
[2022-08-05 14:16:51.013 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 14:16:51.522 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 509.3438ms
[2022-08-05 14:17:27.069 +07:00  INF]  Request starting HTTP/2 PUT https://localhost:7019/api/bookers/gmail application/json 37
[2022-08-05 14:17:27.081 +07:00  INF]  CORS policy execution successful.
[2022-08-05 14:17:27.432 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.UpdateEmail (API)'
[2022-08-05 14:17:27.470 +07:00  INF]  Route matched with {action = "UpdateEmail", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateEmail(API.Models.Requests.UpdateEmailRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:17:29.651 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-08-05 14:17:31.191 +07:00  INF]  Executed DbCommand (135ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.code::text = @__code_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 14:17:31.685 +07:00  INF]  Executed DbCommand (21ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 14:17:31.906 +07:00  INF]  Executed DbCommand (19ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET created_at = @p0, created_by = @p1, deleted_at = @p2, registration = @p3, registration_type = @p4, role_id = @p5, updated_at = @p6, updated_by = @p7, user_id = @p8, verified = @p9
WHERE id = @p10;
[2022-08-05 14:17:31.972 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 14:17:31.991 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.UpdateEmail (API) in 4512.7546ms
[2022-08-05 14:17:31.993 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.UpdateEmail (API)'
[2022-08-05 14:17:32.017 +07:00  INF]  Request finished HTTP/2 PUT https://localhost:7019/api/bookers/gmail application/json 37 - 200 - application/json;+charset=utf-8 4947.8111ms
[2022-08-05 14:17:51.873 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp-to-verify - -
[2022-08-05 14:17:51.880 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:17:51.883 +07:00  INF]  Route matched with {action = "SendGmailOtp", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendGmailOtp() on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:17:51.905 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.code::text = @__code_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 14:17:51.931 +07:00  INF]  Executed DbCommand (8ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 14:17:55.114 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO verified_codes ("AccountId", code, created_at, created_by, deleted_at, expired_time, registration, registration_type, status, type, updated_at, updated_by)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
[2022-08-05 14:17:55.147 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 14:17:55.148 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendGmailOtp (API) in 3265.353ms
[2022-08-05 14:17:55.148 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendGmailOtp (API)'
[2022-08-05 14:17:55.149 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/gmail/send-otp-to-verify - - - 200 - application/json;+charset=utf-8 3276.1435ms
[2022-08-05 14:22:46.330 +07:00  INF]  Request starting HTTP/2 POST https://localhost:7019/api/bookers/gmail/verify-email application/json 21
[2022-08-05 14:22:46.348 +07:00  INF]  CORS policy execution successful.
[2022-08-05 14:22:46.357 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.VerifyEmail (API)'
[2022-08-05 14:22:46.363 +07:00  INF]  Route matched with {action = "VerifyEmail", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] VerifyEmail(API.Models.Requests.VerifyOtpCodeRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:22:46.496 +07:00  INF]  Executed DbCommand (9ms) [Parameters=[@__code_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.code, t.created_at, t.created_by, t.date_of_birth, t.deleted_at, t.gender, t.name, t.status, t.updated_at, t.updated_by, a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified
FROM (
    SELECT u.id, u.code, u.created_at, u.created_by, u.date_of_birth, u.deleted_at, u.gender, u.name, u.status, u.updated_at, u.updated_by
    FROM users AS u
    WHERE u.code::text = @__code_0
    LIMIT 1
) AS t
LEFT JOIN accounts AS a ON t.id = a.user_id
ORDER BY t.id
[2022-08-05 14:22:46.508 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32), @__otp_3='?'], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE (((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)) AND (v.code = @__otp_3)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 14:22:46.518 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE accounts SET created_at = @p0, created_by = @p1, deleted_at = @p2, registration = @p3, registration_type = @p4, role_id = @p5, updated_at = @p6, updated_by = @p7, user_id = @p8, verified = @p9
WHERE id = @p10;
[2022-08-05 14:22:46.529 +07:00  INF]  Executing JsonResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 14:22:46.529 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.VerifyEmail (API) in 166.0073ms
[2022-08-05 14:22:46.529 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.VerifyEmail (API)'
[2022-08-05 14:22:46.529 +07:00  INF]  Request finished HTTP/2 POST https://localhost:7019/api/bookers/gmail/verify-email application/json 21 - 200 - application/json;+charset=utf-8 199.2352ms
[2022-08-05 14:31:07.112 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp-to-update?PhoneNumber=%2B84377322919 - -
[2022-08-05 14:31:07.128 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate (API)'
[2022-08-05 14:31:07.157 +07:00  INF]  Route matched with {action = "SendPhoneOtpForUpdate", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtpForUpdate(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:31:07.248 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 14:31:07.270 +07:00  INF]  Executing BadRequestObjectResult, writing value of type 'API.Models.Response.Response'.
[2022-08-05 14:31:07.273 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate (API) in 115.9443ms
[2022-08-05 14:31:07.273 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate (API)'
[2022-08-05 14:31:07.274 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp-to-update?PhoneNumber=%2B84377322919 - - - 400 - application/json;+charset=utf-8 161.5945ms
[2022-08-05 14:33:44.752 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp-to-update?PhoneNumber=%2B84794333703 - -
[2022-08-05 14:33:44.768 +07:00  INF]  Executing endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate (API)'
[2022-08-05 14:33:44.769 +07:00  INF]  Route matched with {action = "SendPhoneOtpForUpdate", controller = "Bookers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendPhoneOtpForUpdate(API.Models.Requests.SendPhoneOtpRequest) on controller API.Controllers.Booker.BookersController (API).
[2022-08-05 14:33:44.779 +07:00  INF]  Executed DbCommand (7ms) [Parameters=[@__roleName_2='?', @__registration_0='?', @__registrationType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.id, a.created_at, a.created_by, a.deleted_at, a.registration, a.registration_type, a.role_id, a.updated_at, a.updated_by, a.user_id, a.verified, r0.id, r0.created_at, r0.created_by, r0.deleted_at, r0.description, r0.name, r0.updated_at, r0.updated_by
FROM accounts AS a
INNER JOIN (
    SELECT r.id
    FROM roles AS r
    WHERE r.name = @__roleName_2
) AS t ON a.role_id = t.id
LEFT JOIN roles AS r0 ON a.role_id = r0.id
WHERE (a.registration = @__registration_0) AND (a.registration_type = @__registrationType_1)
LIMIT 1
[2022-08-05 14:33:44.785 +07:00  INF]  Executed DbCommand (5ms) [Parameters=[@__registration_0='?', @__registrationType_1='?' (DbType = Int32), @__codeType_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT v.id, v."AccountId", v.code, v.created_at, v.created_by, v.deleted_at, v.expired_time, v.registration, v.registration_type, v.status, v.type, v.updated_at, v.updated_by
FROM verified_codes AS v
WHERE ((v.registration = @__registration_0) AND (v.registration_type = @__registrationType_1)) AND (v.type = @__codeType_2)
ORDER BY v.created_at DESC
LIMIT 1
[2022-08-05 14:33:46.844 +07:00  INF]  Executed action API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate (API) in 2075.1496ms
[2022-08-05 14:33:46.844 +07:00  INF]  Executed endpoint 'API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate (API)'
[2022-08-05 14:33:46.846 +07:00  ERR]  An unhandled exception has occurred while executing the request.
Twilio.Exceptions.ApiException: The number  is unverified. Trial accounts cannot send messages to unverified numbers; verify  at twilio.com/user/account/phone-numbers/verified, or purchase a Twilio number to send messages to unverified numbers.
   at Twilio.Clients.TwilioRestClient.ProcessResponse(Response response)
   at Twilio.Clients.TwilioRestClient.RequestAsync(Request request)
   at Twilio.Rest.Api.V2010.Account.MessageResource.CreateAsync(CreateMessageOptions options, ITwilioRestClient client)
   at Twilio.Rest.Api.V2010.Account.MessageResource.CreateAsync(PhoneNumber to, String pathAccountSid, PhoneNumber from, String messagingServiceSid, String body, List`1 mediaUrl, Uri statusCallback, String applicationSid, Nullable`1 maxPrice, Nullable`1 provideFeedback, Nullable`1 attempt, Nullable`1 validityPeriod, Nullable`1 forceDelivery, ContentRetentionEnum contentRetention, AddressRetentionEnum addressRetention, Nullable`1 smartEncoded, List`1 persistentAction, ScheduleTypeEnum scheduleType, Nullable`1 sendAt, Nullable`1 sendAsMms, ITwilioRestClient client)
   at API.Services.VerifiedCodeService.SendSMS(String sms, String toPhoneNumber) in G:\.NET Core\ViGoAPI\ViGoAPI\API\Services\VerifiedCodeService.cs:line 106
   at API.Services.VerifiedCodeService.SendPhoneOtp(String phoneNumber) in G:\.NET Core\ViGoAPI\ViGoAPI\API\Services\VerifiedCodeService.cs:line 43
   at API.Controllers.Booker.BookersController.SendPhoneOtpForUpdate(SendPhoneOtpRequest request) in G:\.NET Core\ViGoAPI\ViGoAPI\API\Controllers\Booker\BookersController.cs:line 250
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
[2022-08-05 14:33:46.978 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/api/bookers/phone/send-otp-to-update?PhoneNumber=%2B84794333703 - - - 500 - text/plain;+charset=utf-8 2229.5234ms
[2022-08-05 16:47:02.469 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 16:47:02.971 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 16:47:02.971 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 16:47:02.976 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 16:47:02.976 +07:00  INF]  Hosting environment: Development
[2022-08-05 16:47:02.976 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 16:47:03.912 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 16:47:04.519 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 16:47:04.520 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 16:47:04.538 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 626.2189ms
[2022-08-05 16:47:04.558 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 38.6622ms
[2022-08-05 16:47:04.640 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 120.5398ms
[2022-08-05 16:47:04.714 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 16:47:04.913 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.2591ms
[2022-08-05 16:52:59.988 +07:00  INF]  User profile is available. Using 'C:\Users\Win\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2022-08-05 16:53:00.354 +07:00  INF]  Now listening on: https://localhost:7019
[2022-08-05 16:53:00.354 +07:00  INF]  Now listening on: http://localhost:5019
[2022-08-05 16:53:00.360 +07:00  INF]  Application started. Press Ctrl+C to shut down.
[2022-08-05 16:53:00.361 +07:00  INF]  Hosting environment: Development
[2022-08-05 16:53:00.361 +07:00  INF]  Content root path: G:\.NET Core\ViGoAPI\ViGoAPI\API\
[2022-08-05 16:53:00.873 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/index.html - -
[2022-08-05 16:53:01.829 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - -
[2022-08-05 16:53:01.864 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/_vs/browserLink - -
[2022-08-05 16:53:01.879 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_framework/aspnetcore-browser-refresh.js - - - 200 11976 application/javascript;+charset=utf-8 38.8468ms
[2022-08-05 16:53:01.883 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/index.html - - - 200 - text/html;charset=utf-8 1019.1796ms
[2022-08-05 16:53:01.952 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 87.8185ms
[2022-08-05 16:53:02.204 +07:00  INF]  Request starting HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - -
[2022-08-05 16:53:02.627 +07:00  INF]  Request finished HTTP/2 GET https://localhost:7019/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 423.1296ms
