[2022-07-29 23:38:12.023 +07:00  INF]  Entity Framework Core 6.0.6 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.5+9d79af6e2586d5d28da253ac075706a5575a1743' with options: MaxPoolSize=1024 
[2022-07-29 23:38:13.467 +07:00  INF]  Executed DbCommand (1,009ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "MaaSDB";
[2022-07-29 23:38:13.874 +07:00  INF]  Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
[2022-07-29 23:38:14.041 +07:00  INF]  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');
[2022-07-29 23:38:14.045 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
[2022-07-29 23:38:14.064 +07:00  INF]  Applying migration '20220726081028_InitialDB'.
[2022-07-29 23:38:14.127 +07:00  INF]  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE roles (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    description character varying(100) NOT NULL,
    name character varying(20) NOT NULL,
    created_at timestamp with time zone NOT NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_roles" PRIMARY KEY (id)
);
[2022-07-29 23:38:14.132 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE users (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    code uuid NOT NULL,
    name character varying(50) NOT NULL,
    gender integer NOT NULL,
    status integer NOT NULL,
    date_of_birth timestamp with time zone NOT NULL,
    created_at timestamp with time zone NOT NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_users" PRIMARY KEY (id)
);
[2022-07-29 23:38:14.149 +07:00  INF]  Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE accounts (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    user_id integer NOT NULL,
    registration character varying(30) NULL,
    registration_type integer NOT NULL,
    verified boolean NOT NULL DEFAULT FALSE,
    role_id integer NULL,
    created_at timestamp with time zone NOT NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_accounts" PRIMARY KEY (id),
    CONSTRAINT "FK_accounts_roles_role_id" FOREIGN KEY (role_id) REFERENCES roles (id),
    CONSTRAINT "FK_accounts_users_user_id" FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);
[2022-07-29 23:38:14.153 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE verified_codes (
    id integer GENERATED BY DEFAULT AS IDENTITY,
    expired_time timestamp with time zone NOT NULL,
    code character varying(10) NOT NULL,
    registration character varying(30) NOT NULL,
    registration_type integer NOT NULL,
    status boolean NOT NULL,
    type integer NOT NULL,
    "AccountId" integer NULL,
    created_at timestamp with time zone NOT NULL,
    created_by integer NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    updated_by integer NOT NULL,
    deleted_at timestamp with time zone NULL,
    CONSTRAINT "PK_verified_codes" PRIMARY KEY (id),
    CONSTRAINT "FK_verified_codes_accounts_AccountId" FOREIGN KEY ("AccountId") REFERENCES accounts (id)
);
[2022-07-29 23:38:14.160 +07:00  INF]  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (1, TIMESTAMPTZ '2022-07-26 08:10:27.876439Z', 0, NULL, 'Role for booker', 'BOOKER', TIMESTAMPTZ '2022-07-26 08:10:27.876439Z', 0);
INSERT INTO roles (id, created_at, created_by, deleted_at, description, name, updated_at, updated_by)
VALUES (2, TIMESTAMPTZ '2022-07-26 08:10:27.876437Z', 0, NULL, 'Role for driver', 'DRIVER', TIMESTAMPTZ '2022-07-26 08:10:27.876437Z', 0);
[2022-07-29 23:38:14.162 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (1, 'da0ef573-6a50-4b0e-a0bb-8cadcf8d3331', TIMESTAMPTZ '2022-07-26 08:10:27.876439Z', 0, TIMESTAMPTZ '2022-07-26 08:10:27.876442Z', NULL, 1, 'Quach Dai Loi', 1, TIMESTAMPTZ '2022-07-26 08:10:27.876439Z', 0);
INSERT INTO users (id, code, created_at, created_by, date_of_birth, deleted_at, gender, name, status, updated_at, updated_by)
VALUES (2, 'bd5b5d29-26e9-4f60-9502-4b71bae15ea4', TIMESTAMPTZ '2022-07-26 08:10:27.876448Z', 0, TIMESTAMPTZ '2022-07-26 08:10:27.876449Z', NULL, 1, 'Olivier', 1, TIMESTAMPTZ '2022-07-26 08:10:27.876449Z', 0);
[2022-07-29 23:38:14.166 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (1, TIMESTAMPTZ '2022-07-26 08:10:27.87645Z', 0, NULL, 'loiqdse140970@fpt.edu.vn', 0, 2, TIMESTAMPTZ '2022-07-26 08:10:27.87645Z', 0, 2, TRUE);
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (2, TIMESTAMPTZ '2022-07-26 08:10:27.876451Z', 0, NULL, '+84837226239', 1, 2, TIMESTAMPTZ '2022-07-26 08:10:27.876451Z', 0, 2, TRUE);
INSERT INTO accounts (id, created_at, created_by, deleted_at, registration, registration_type, role_id, updated_at, updated_by, user_id, verified)
VALUES (3, TIMESTAMPTZ '2022-07-26 08:10:27.876451Z', 0, NULL, '+84837226239', 1, 1, TIMESTAMPTZ '2022-07-26 08:10:27.876451Z', 0, 1, TRUE);
[2022-07-29 23:38:14.170 +07:00  INF]  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_accounts_registration_role_id" ON accounts (registration, role_id);
[2022-07-29 23:38:14.173 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_role_id" ON accounts (role_id);
[2022-07-29 23:38:14.177 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_accounts_user_id" ON accounts (user_id);
[2022-07-29 23:38:14.180 +07:00  INF]  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_roles_description" ON roles (description);
[2022-07-29 23:38:14.183 +07:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_verified_codes_AccountId" ON verified_codes ("AccountId");
[2022-07-29 23:38:14.195 +07:00  INF]  Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('roles', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM roles) + 1,
        nextval(pg_get_serial_sequence('roles', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('users', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM users) + 1,
        nextval(pg_get_serial_sequence('users', 'id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('accounts', 'id'),
    GREATEST(
        (SELECT MAX(id) FROM accounts) + 1,
        nextval(pg_get_serial_sequence('accounts', 'id'))),
    false);
[2022-07-29 23:38:14.195 +07:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220726081028_InitialDB', '6.0.6');
